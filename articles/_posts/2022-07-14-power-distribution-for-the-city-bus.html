---

layout              : article
title               : "Power Distribution For the City Bus"
subheadline         : ""
teaser               : "Thoughts and Ramblings"

---
<p>Just a follow up on the idea for connecting the Lego City bus lights with TTL outputs. My design in the previous post does work, although the implementation is pretty horrible...</p>

<!-- wp:image {"align":"right","id":2331,"sizeSlug":"medium","linkDestination":"none"} -->
<figure class=" alignright size-medium"><img src="/img/uploads/2022/07/IMG_0146-225x300.jpeg" alt="" class="wp-image-2331"/></figure>
<!-- /wp:image -->

<p>This is my rather crude sketch showing the PCB layout. At the top we have header pins for the 5 control inputs, and separate 5V and ground connections. Below that are 3K3 Ω base current bias resistors, and then (the purple dots) the 3 legs of 2N2222 transistors. With these the collectors and connected to the 5V supply and the emitters to  the actual LED devices via 220 Ω current limiting resistors. The LEDs themselves are connected via thin wires from the PCB holes at the very bottom of the diagram.</p>

<!-- wp:image {"id":2329,"width":256,"height":192,"sizeSlug":"large","linkDestination":"none"} -->
<figure class=" size-large is-resized"><img src="/img/uploads/2022/07/IMG_0145-e1657837912678-1024x768.jpeg" alt="" class="wp-image-2329" width="256" height="192"/></figure>
<!-- /wp:image -->

<p>And this is the implementation, I could have shortenend the PCB a bit, but I wanted to leave a bit of room to add a micro USB input as an alternate source for the 5V and ground, and perhaps the trimpot to adjust the brightness, although my initial tests suggest it is fine and may not be needed.</p>

<p>The 10 LEDs require about 20mA of current each, which is a large chunk of that available if I were to drive them directly from an Arduino or Raspberry Pi, but thanks to the separate 5V supply and the transistors acting as switching amplifiers, the base current is only about 50 μA for each control input. Result!</p>

<p>OK, I know the soldering is pretty awful, and even worse on the back side, but it does at least work and I promise I work harder to improve things here...</p>

<!-- wp:image {"align":"center","id":2330,"sizeSlug":"medium","linkDestination":"none"} -->
<figure class=" aligncenter size-medium"><img src="/img/uploads/2022/07/IMG_0147-e1657837953282-300x225.jpeg" alt="" class="wp-image-2330"/></figure>
<!-- /wp:image -->

<p>Next step, lets write some code to control the lights in my desired sequence....</p>

<h2>Related Posts</h2>

<!-- wp:latest-posts {"categories":[{"id":29,"count":3,"description":"Bringing Lego Creator buildings to Life","link":"https://karlwilcox.com/category/projects/legocity/","name":"Lego City","slug":"legocity","taxonomy":"category","parent":27,"meta":[],"_links":{"self":[{"href":"https://karlwilcox.com/wp-json/wp/v2/categories/29"}],"collection":[{"href":"https://karlwilcox.com/wp-json/wp/v2/categories"}],"about":[{"href":"https://karlwilcox.com/wp-json/wp/v2/taxonomies/category"}],"up":[{"embeddable":true,"href":"https://karlwilcox.com/wp-json/wp/v2/categories/27"}],"wp:post_type":[{"href":"https://karlwilcox.com/wp-json/wp/v2/posts?categories=29"}],"curies":[{"name":"wp","href":"https://api.w.org/{rel}","templated":true}]}}],"postsToShow":20} /-->