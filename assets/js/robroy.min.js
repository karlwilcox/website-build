!function(){"use strict";const e={activeElement:null,args:null,lang:null,currentIndex:null,isInited:!1,numImages:0,init:t=>{(t=t||{}).selector=t.disableKeyPressListener||"[data-robroy]",t.bodyClass=t.bodyClass||"robroy-open",t.id=t.id||"robroy",t.disableKeyPressListener=t.disableKeyPressListener||!1,t.disableResizeListener=t.disableResizeListener||!1,t.resizeDebounceMilliseconds=t.resizeDebounceMilliseconds||100,t.minScreenWidth=t.minScreenWidth||400,t.disableImageClickListener=t.disableImageClickListener||!1,t.imageClickListenerThreshold=t.imageClickListenerThreshold||.5,t.disableOverlayClickListener=t.disableOverlayClickListener||!1,t.hideCloseButton=t.hideCloseButton||!1,t.hideFullScreenButton=t.hideFullScreenButton||!1,t.hideNavButtons=t.hideNavButtons||!1,t.hideCaption=t.hideCaption||!1,t.hideOverlay=t.hideOverlay||!1,t.disableAltCaptions=t.disableAltCaptions||!1,t.imgLoadIntervalMilliseconds=t.imgLoadIntervalMilliseconds||250,t.animateInClass=t.animateInClass||"robroy-fade-in",t.animateOutClass=t.animateOutClass||"robroy-fade-out",t.enableLoop=t.enableLoop||!1,t.showNumber=t.showNumber||!1,e.args=t;const r=t.lang||{};r.closeImage=r.closeImage||"Close Image",r.fullScreen=r.fullScreen||"Full Screen",r.previousImage=r.previousImage||"Previous Image",r.nextImage=r.nextImage||"Next Image",r.xOfY=r.xOfY||"[current] / [total]",e.lang=r;const n=document.querySelectorAll(t.selector),i=n.length;let o;for(o=0;o<i;o+=1)n[o].addEventListener("click",e.onClickThumbnail),n[o].setAttribute("data-robroy-index",o),e.numImages+=1;e.isInited||e.numImages<=0||(t.disableKeyPressListener||document.addEventListener("keydown",t=>{document.getElementById(e.args.id)&&("ArrowRight"===t.key?e.next():"ArrowLeft"===t.key?e.previous():"Escape"===t.key&&e.close())},!1),t.disableResizeListener||(t.resizeDebounceMilliseconds?window.addEventListener("resize",((e,t,r)=>{let n;return(...i)=>{const o=r&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,r||e(...i)},t),o&&e(...i)}})(e.onResize,t.resizeDebounceMilliseconds)):window.addEventListener("resize",e.onResize)),e.isInited=!0)},onClickThumbnail:t=>{if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;if(e.args.minScreenWidth&&window.innerWidth<=e.args.minScreenWidth)return;let r=t.target;for(;!r.getAttribute("data-robroy-href")&&!r.getAttribute("href");)r=r.parentNode;e.open(r),t.preventDefault()},onClickImage:t=>{const r=t.target.width,n=r*e.args.imageClickListenerThreshold;t.offsetX<=n?e.previous():t.offsetX>=r-n&&e.next()},onResize:()=>{const t=document.getElementById(e.args.id);if(!t)return;const r=t.querySelector(".robroy__img"),n=t.querySelector(".robroy__caption");e.setSize(r,n)},getAnimationDuration:e=>{let t=getComputedStyle(e).animationDuration;return t.includes("ms")?t=parseFloat(t.replace("ms","")):t.includes("s")&&(t=1e3*parseFloat(t.replace("s",""))),t},open:t=>{if(document.getElementById(e.args.id))return;e.activeElement=t,e.args.bodyClass&&document.body.classList.add(e.args.bodyClass);const r=document.createElement("dialog");r.setAttribute("class",`robroy ${e.args.animateInClass}`.trim()),r.setAttribute("id",e.args.id),document.body.appendChild(r);const n=document.createElement("figure");if(n.setAttribute("class","robroy__figure robroy__figure--loading"),r.appendChild(n),!e.args.hideFullScreenButton){const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--full-screen"),t.setAttribute("title",e.lang.fullScreen),t.setAttribute("type","button"),t.addEventListener("click",e.fullScreen),t.innerText=e.lang.fullScreen,n.appendChild(t)}if(!e.args.hideCloseButton){const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--close"),t.setAttribute("title",e.lang.closeImage),t.setAttribute("type","button"),t.addEventListener("click",e.close),t.innerText=e.lang.closeImage,n.appendChild(t)}if(!e.args.hideNavButtons){const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--nav robroy__button--prev"),t.setAttribute("title",e.lang.previousImage),t.setAttribute("type","button"),t.addEventListener("click",e.previous),t.innerText=e.lang.previousImage,n.appendChild(t);const r=document.createElement("button");r.setAttribute("class","robroy__button robroy__button--nav robroy__button--next"),r.setAttribute("title",e.lang.nextImage),r.setAttribute("type","button"),r.innerText=e.lang.nextImage,r.addEventListener("click",e.next),n.appendChild(r)}const i=document.createElement("img");if(i.setAttribute("class","robroy__img"),e.args.disableImageClickListener||i.addEventListener("click",e.onClickImage),n.appendChild(i),!e.args.hideCaption){const e=document.createElement("figcaption");e.setAttribute("class","robroy__caption"),n.appendChild(e)}if(e.args.showNumber){const e=document.createElement("span");e.setAttribute("class","robroy__number"),r.appendChild(e)}if(!e.args.hideOverlay){const t=document.createElement("div");t.setAttribute("class","overlay robroy__overlay"),e.args.disableOverlayClickListener||t.addEventListener("click",e.close),r.appendChild(t)}if(e.setImage(t),r.showModal(),r.focus(),e.args.animateInClass){const t=e.getAnimationDuration(r);setTimeout(()=>{r.classList.remove(e.args.animateInClass)},t+100)}},close:()=>{e.args.bodyClass&&document.body.classList.remove("robroy-open");const t=document.getElementById(e.args.id);if(e.args.animateOutClass){t.classList.add(e.args.animateOutClass);const r=e.getAnimationDuration(t);setTimeout(()=>{e.onClose(t)},r+100)}else e.onClose(t)},onClose:t=>{t.remove(),e.activeElement.focus(),e.activeElement=null},next:()=>{let t=e.currentIndex+1;if(e.currentIndex>=e.numImages-1){if(!e.args.enableLoop)return;t=0}const r=document.querySelector(`[data-robroy-index="${t}"]`);e.setImage(r)},previous:()=>{let t=e.currentIndex-1;if(e.currentIndex<=0){if(!e.args.enableLoop)return;t=e.numImages-1}const r=document.querySelector(`[data-robroy-index="${t}"]`);e.setImage(r)},fullScreen:()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},getCaption:t=>{if(t.getAttribute("data-robroy-caption"))return t.getAttribute("data-robroy-caption");let r=t.querySelector("figcaption");if(r)return r.innerHTML;if(r=t.parentNode.querySelector("figcaption"),r)return r.innerHTML;if(!e.args.disableAltCaptions){const e=t.querySelector("img");if(e)return e.getAttribute("alt")}return""},setImage:t=>{const r=document.getElementById(e.args.id);if(r.classList.add("robroy--loading"),e.currentIndex=parseInt(t.getAttribute("data-robroy-index"),10),!e.args.hideNavButtons&&!e.args.enableLoop){const t=r.querySelector(".robroy__button--prev"),n=r.querySelector(".robroy__button--next");e.currentIndex<=0?t.classList.add("robroy-hide"):t.classList.remove("robroy-hide"),e.currentIndex>=e.numImages-1?n.classList.add("robroy-hide"):n.classList.remove("robroy-hide")}if(e.args.showNumber){const n=r.querySelector(".robroy__number"),i=parseInt(t.getAttribute("data-robroy-index"),10)+1;n.innerText=e.lang.xOfY.replace("[current]",i).replace("[total]",e.numImages)}const n=r.querySelector(".robroy__img");let i=t.getAttribute("data-robroy-href");i||(i=t.getAttribute("href")),n.setAttribute("src",i);const o=t.getAttribute("data-robroy-height"),s=t.getAttribute("data-robroy-width");if(o&&s){const t=e.getSize(o,s);n.setAttribute("height",t.height),n.setAttribute("width",t.width)}const a=r.querySelector(".robroy__caption"),l=e.getCaption(t);l?(a.classList.remove("robroy-hide"),a.innerHTML=l):(a.classList.add("robroy-hide"),a.innerText="");const d=r.querySelector(".robroy__figure");if(n.complete)e.setSize(n,a),r.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading");else{let t=setInterval(()=>{n.complete&&(clearInterval(t),t=null,e.setSize(n,a),r.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading"))},e.args.imgLoadIntervalMilliseconds)}},getSize:(t,r)=>{const n=e.getMargin(),i=window.innerHeight-n,o=window.innerWidth-n,s=r/t,a=t/r;return t>i&&(r=(t=i)*s),r>o&&(t=(r=o)*a),{height:t,width:r}},setSize:(t,r)=>{t.setAttribute("height",""),t.setAttribute("width",""),r.style.width="",r.style.height="";const n=e.getSize(t.clientHeight,t.clientWidth);if(t.setAttribute("height",n.height),t.setAttribute("width",n.width),r.style.width=`${n.width}px`,r.innerHTML){let i=r.offsetTop+r.clientHeight,{height:o,width:s}=n;const a=s/o,l=e.getMargin(),d=window.innerHeight-l,c=d/2;for(;i>d&&o>c;)o-=1,s=o*a,t.setAttribute("height",o),t.setAttribute("width",s),r.style.width=`${s}px`,i=r.offsetTop+r.clientHeight;r.style.height=i>d?`${c}px`:""}},getMargin:()=>Math.round(.1*window.innerHeight)};var t=e;const r=e=>{t.init(e)};window.robroy=r}();